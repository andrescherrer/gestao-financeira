# FE-AUTH-001 - Configurar TanStack Query Provider

**Data:** 2025-12-23  
**Status:** ✅ Concluída

## Resumo da Implementação

**Tarefa:** FE-AUTH-001 - Configurar TanStack Query Provider

### Arquivos Criados

1. **`lib/providers/QueryProvider.tsx`**
   - Provider do TanStack Query
   - Configuração centralizada do QueryClient
   - React Query Devtools apenas em desenvolvimento
   - Configurações otimizadas de cache e retry

### Dependências Instaladas

- **@tanstack/react-query-devtools** (dev dependency)
  - Ferramentas de desenvolvimento para React Query
  - Disponível apenas em modo desenvolvimento

### Configurações do QueryClient

#### Queries (Consultas)
- **staleTime**: 5 minutos
  - Tempo que os dados são considerados "frescos"
  - Evita refetch desnecessário
  
- **gcTime**: 10 minutos
  - Tempo antes de remover dados do cache
  - Anteriormente chamado de `cacheTime`
  
- **retry**: 1
  - Número de tentativas automáticas em caso de erro
  
- **refetchOnWindowFocus**: true
  - Refaz consulta quando a janela recebe foco
  
- **refetchOnReconnect**: true
  - Refaz consulta quando reconecta à rede

#### Mutations (Mutações)
- **retry**: 1
  - Número de tentativas automáticas em caso de erro

### Integração

**`app/layout.tsx`**:
- QueryProvider envolvendo toda a aplicação
- Permite uso de hooks do React Query em qualquer componente
- Devtools disponível apenas em desenvolvimento

### Funcionalidades

- ✅ QueryClient configurado com opções otimizadas
- ✅ Cache inteligente (5min staleTime, 10min gcTime)
- ✅ Retry automático em caso de erro
- ✅ Refetch automático ao focar janela ou reconectar
- ✅ Devtools apenas em desenvolvimento
- ✅ Provider disponível globalmente

### Uso

```typescript
// Em qualquer componente
import { useQuery, useMutation } from '@tanstack/react-query';

function MyComponent() {
  const { data, isLoading } = useQuery({
    queryKey: ['users'],
    queryFn: fetchUsers,
  });
  
  // ...
}
```

### Próximos Passos

Esta configuração será usada em:
- **FE-AUTH-003**: Hook useAuth (usará useQuery e useMutation)
- **FE-ACC-001**: Hook useAccounts (usará useQuery)
- **FE-TX-001**: Hook useTransactions (usará useQuery e useMutation)

### Testes Realizados

- ✅ QueryProvider criado e configurado
- ✅ Integrado no layout principal
- ✅ React Query Devtools instalado
- ✅ `npm run build` - Build do projeto passou
- ✅ TypeScript sem erros

### Próxima Tarefa

FE-AUTH-002 - Criar contexto de autenticação (AuthContext)

### Commits Realizados

- `feat: FE-AUTH-001 - configurar TanStack Query Provider`

