# FE-ACC-006: Criar formul√°rio de conta (Vue Composition API)

**Data de Conclus√£o:** 2025-12-24  
**Sprint:** 1.9 - M√≥dulo de Contas - Frontend  
**Status:** ‚úÖ Conclu√≠do

---

## üìã Resumo

Cria√ß√£o do componente reutiliz√°vel `AccountForm` para formul√°rio de contas, extraindo a l√≥gica do formul√°rio da p√°gina de cria√ß√£o para um componente separado, facilitando reutiliza√ß√£o e manuten√ß√£o.

---

## üéØ Objetivo

Criar um componente de formul√°rio reutiliz√°vel que pode ser usado tanto para cria√ß√£o quanto para edi√ß√£o de contas, seguindo o padr√£o de componentes reutiliz√°veis estabelecido no projeto.

---

## ‚úÖ Implementa√ß√£o

### 1. **Componente AccountForm** (`src/components/AccountForm.vue`)

**Props:**
- `initialValues` (opcional): Valores iniciais do formul√°rio (√∫til para edi√ß√£o)
- `submitLabel` (opcional): Label do bot√£o de submit (padr√£o: "Salvar")
- `isLoading` (opcional): Estado de carregamento (padr√£o: false)

**Slots:**
- `actions`: Slot para customizar bot√µes de a√ß√£o

**Emits:**
- `submit`: Emitido quando formul√°rio √© submetido com valores v√°lidos

**Exposed Methods:**
- `setError(message)`: Define mensagem de erro externamente
- `clearError()`: Limpa mensagem de erro

**Funcionalidades:**
- Valida√ß√£o com vee-validate + Zod
- Campos: nome, tipo, contexto, moeda, saldo inicial
- Feedback visual de erros
- Mensagens de erro espec√≠ficas por campo
- Suporte a valores iniciais (para edi√ß√£o futura)

### 2. **Campos do Formul√°rio**

1. **Nome da Conta** (text, obrigat√≥rio)
   - Valida√ß√£o: m√≠nimo 2, m√°ximo 100 caracteres
   - Placeholder: "Ex: Conta Corrente Banco do Brasil"

2. **Tipo de Conta** (select, obrigat√≥rio)
   - Op√ß√µes: Banco, Carteira, Investimento, Cart√£o de Cr√©dito

3. **Contexto** (select, obrigat√≥rio)
   - Op√ß√µes: Pessoal, Neg√≥cio

4. **Moeda** (select, opcional, padr√£o BRL)
   - Op√ß√µes: BRL, USD, EUR

5. **Saldo Inicial** (number, opcional)
   - Permite valores decimais (step="0.01")
   - Dica: "Deixe em branco para come√ßar com saldo zero"

### 3. **Refatora√ß√£o da NewAccountView**

**Mudan√ßas:**
- Removida l√≥gica do formul√°rio inline
- Uso do componente `AccountForm`
- Customiza√ß√£o de bot√µes via slot `actions`
- Gerenciamento de erro via ref do componente

**Antes:**
```vue
<Form @submit="handleSubmit">
  <!-- HTML do formul√°rio inline -->
</Form>
```

**Depois:**
```vue
<AccountForm
  ref="formRef"
  :isLoading="accountsStore.isLoading"
  submitLabel="Criar Conta"
  @submit="handleSubmit"
>
  <template #actions="{ isLoading }">
    <!-- Bot√µes customizados -->
  </template>
</AccountForm>
```

**Benef√≠cios:**
- C√≥digo mais limpo e organizado
- Componente reutiliz√°vel
- Facilita manuten√ß√£o
- Preparado para edi√ß√£o (com initialValues)

---

## üé® Design e UX

### Layout
- **Campos:** Espa√ßamento adequado (space-y-6)
- **Labels:** text-sm font-medium text-gray-700
- **Campos obrigat√≥rios:** Marcados com asterisco vermelho
- **Feedback visual:** Bordas vermelhas em campos inv√°lidos

### Estados Visuais
- **Campos v√°lidos:** Borda cinza
- **Campos inv√°lidos:** Borda vermelha
- **Mensagens de erro:** Texto vermelho abaixo do campo
- **Error geral:** Card vermelho acima do formul√°rio

### Flexibilidade
- **Slot de a√ß√µes:** Permite customizar bot√µes
- **Props configur√°veis:** Label, loading, valores iniciais
- **M√©todos expostos:** Controle externo de erros

---

## üìÅ Estrutura de Arquivos

```
frontend/src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ AccountForm.vue    ‚úÖ Novo (componente reutiliz√°vel)
‚îî‚îÄ‚îÄ views/
    ‚îî‚îÄ‚îÄ NewAccountView.vue  ‚úÖ Atualizado (usa AccountForm)
```

---

## üîß Depend√™ncias

**Valida√ß√£o:**
- `vee-validate` (FE-004)
- `@vee-validate/zod` (FE-004)
- `zod` (FE-004)

**Schemas:**
- `createAccountSchema` de `@/validations/account`

**Tipos:**
- `CreateAccountFormData` de `@/validations/account`

---

## ‚úÖ Testes

### Testes Manuais Realizados
- ‚úÖ Componente renderiza corretamente
- ‚úÖ Props s√£o recebidas e aplicadas
- ‚úÖ Valida√ß√£o funciona em todos os campos
- ‚úÖ Mensagens de erro exibidas corretamente
- ‚úÖ Feedback visual de erros funciona
- ‚úÖ Slot de a√ß√µes funciona
- ‚úÖ M√©todos expostos funcionam (setError, clearError)
- ‚úÖ Emit de submit funciona
- ‚úÖ Valores iniciais funcionam (quando fornecidos)
- ‚úÖ Refatora√ß√£o n√£o quebrou funcionalidade existente

---

## üöÄ Pr√≥ximos Passos

1. **FE-ACC-007:** Integrar com API de contas (listar) - j√° implementado
2. **FE-ACC-008:** Integrar com API de contas (criar) - j√° implementado
3. **FE-ACC-009:** Integrar com API de contas (detalhes) - j√° implementado
4. **Futuro:** Usar AccountForm para edi√ß√£o de contas

---

## üìù Notas T√©cnicas

### Decis√µes de Design
1. **Componente reutiliz√°vel:** Facilita manuten√ß√£o e consist√™ncia
2. **Slot de a√ß√µes:** Permite customiza√ß√£o de bot√µes
3. **M√©todos expostos:** Facilita controle externo de erros
4. **Props tipadas:** TypeScript garante type safety
5. **Valores iniciais:** Preparado para edi√ß√£o futura

### Melhorias Futuras
- Adicionar modo de edi√ß√£o (readonly para alguns campos)
- Adicionar valida√ß√£o de nome duplicado
- Adicionar sugest√µes de nomes baseadas no tipo
- Adicionar m√°scara de moeda no campo de saldo
- Adicionar preview da conta antes de salvar

### Reutiliza√ß√£o
O componente pode ser usado em:
- Cria√ß√£o de conta (j√° implementado)
- Edi√ß√£o de conta (futuro)
- Modal de cria√ß√£o r√°pida (futuro)
- Wizard de configura√ß√£o (futuro)

---

**Tarefa conclu√≠da com sucesso!** ‚úÖ

