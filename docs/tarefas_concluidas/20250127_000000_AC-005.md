# AC-005 - Criar migration para tabela accounts

**Data:** 2025-12-23  
**Status:** ✅ Concluída

## Resumo da Implementação

**Tarefa:** AC-005 - Criar migration para tabela accounts

### Arquivo Criado

- **`002_create_accounts_table.sql`** - Migration SQL para PostgreSQL:
  - Tabela `accounts` com todos os campos necessários
  - Foreign key para `users` com CASCADE delete
  - Check constraints para type, context e currency
  - Índices otimizados: user_id, user_id+context, deleted_at, is_active, type
  - Trigger para atualização automática de updated_at
  - Comentários descritivos na tabela e colunas

### Características

- ✅ Balance armazenado em BIGINT (cents) para precisão e valores grandes
- ✅ Suporte a soft delete (deleted_at)
- ✅ Foreign key com CASCADE para integridade referencial
- ✅ Check constraints para validação de dados
- ✅ Índices para otimização de queries
- ✅ Segue o padrão da migration de users

### Estrutura da Tabela

- `id` - UUID (Primary Key)
- `user_id` - UUID (Foreign Key → users.id)
- `name` - VARCHAR(100)
- `type` - VARCHAR(50) (BANK, WALLET, INVESTMENT, CREDIT_CARD)
- `balance` - BIGINT (amount in cents)
- `currency` - VARCHAR(3) (BRL, USD, EUR)
- `context` - VARCHAR(20) (PERSONAL, BUSINESS)
- `is_active` - BOOLEAN (default: true)
- `created_at` - TIMESTAMP
- `updated_at` - TIMESTAMP (auto-updated)
- `deleted_at` - TIMESTAMP (soft delete)

### Commits Realizados

- `a677144` - Implementação da migration accounts
- `1415548` - Atualização do TAREFAS.md e documentação

### Próxima Tarefa

AC-006 - Implementar CreateAccountUseCase

