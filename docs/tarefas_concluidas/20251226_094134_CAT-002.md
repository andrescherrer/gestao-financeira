# CAT-002: Criar entidade Category (agregado raiz)

**Data:** 2025-12-26 09:41:34  
**Sprint:** 2.3 - Category Context - Backend  
**Status:** ✅ Completo

## Resumo

Criação da entidade `Category` como agregado raiz do contexto de Category. A entidade encapsula a lógica de negócio relacionada a categorias de transações, incluindo validações e eventos de domínio.

## Implementação

### Arquivos Criados

- `backend/internal/category/domain/entities/category.go`
- `backend/internal/category/domain/entities/category_test.go`

### Funcionalidades

1. **NewCategory**: Cria uma nova categoria com validações
2. **CategoryFromPersistence**: Reconstrói uma categoria a partir de dados persistidos (sem eventos)
3. **UpdateName**: Atualiza o nome da categoria
4. **UpdateDescription**: Atualiza a descrição da categoria
5. **Deactivate**: Desativa a categoria
6. **Activate**: Ativa a categoria
7. **GetEvents/ClearEvents**: Gerenciamento de eventos de domínio

### Validações

- User ID não pode ser vazio
- Category name não pode ser vazio
- Description não pode exceder 500 caracteres
- Não é possível atualizar categoria inativa

### Eventos de Domínio

- `CategoryCreated`: Quando uma nova categoria é criada
- `CategoryNameUpdated`: Quando o nome é atualizado
- `CategoryDescriptionUpdated`: Quando a descrição é atualizada
- `CategoryDeactivated`: Quando a categoria é desativada
- `CategoryActivated`: Quando a categoria é ativada

### Testes

Testes unitários cobrindo:
- Criação de categoria válida
- Validações de entrada inválida
- Atualização de nome e descrição
- Ativação e desativação
- Reconstrução a partir de persistência
- Verificação de eventos de domínio

## Padrão Seguido

Seguido o mesmo padrão usado em `Account` e `Transaction`, garantindo consistência na arquitetura DDD.

