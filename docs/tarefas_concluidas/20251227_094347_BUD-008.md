# BUD-007: Implementar cálculo de progresso do orçamento

**Data:** 2025-12-27 09:43:47  
**Sprint:** 3.1 - Budget Context - Backend  
**Status:** ✅ Completo

## Resumo

Implementação do use case `GetBudgetProgressUseCase` para calcular o progresso de um orçamento, incluindo valor gasto, valor restante e percentual utilizado.

## Implementação

### Arquivos Criados

- `backend/internal/budget/application/usecases/get_budget_progress_usecase.go`
- `backend/internal/budget/application/dtos/budget_progress_dto.go`

### Funcionalidades

1. **GetBudgetProgressUseCase**
   - Busca orçamento por ID
   - Valida propriedade (userID)
   - Busca transações do usuário no período
   - Calcula valor gasto
   - Calcula valor restante
   - Calcula percentual utilizado
   - Detecta se orçamento foi excedido

### DTO Criado

- `GetBudgetProgressInput`: BudgetID e UserID
- `GetBudgetProgressOutput`: 
  - BudgetID, CategoryID
  - Budgeted, Spent, Remaining
  - PercentageUsed
  - Currency
  - IsExceeded
  - PeriodType, Year, Month

### Cálculos

- **Spent**: Soma de todas as transações do tipo EXPENSE do usuário no período
- **Remaining**: Budgeted - Spent
- **PercentageUsed**: (Spent / Budgeted) * 100
- **IsExceeded**: Spent > Budgeted

### Limitações Atuais

⚠️ **Nota Técnica**: Atualmente, o cálculo soma todas as despesas do usuário no período, pois a entidade `Transaction` ainda não possui `CategoryID`. Isso será refinado em uma sprint futura quando `Transaction` incluir `CategoryID`, permitindo filtrar despesas por categoria.

### Validações

- BudgetID e UserID devem ser UUIDs válidos
- Orçamento deve existir
- Orçamento deve pertencer ao usuário
- Apenas transações do tipo EXPENSE são consideradas
- Apenas transações com a mesma moeda são consideradas
- Apenas transações dentro do período são consideradas

## Padrão Seguido

Seguido o mesmo padrão usado em outros use cases do projeto, garantindo consistência na arquitetura.

