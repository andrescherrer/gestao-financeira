# FE-ACC-004: Criar p√°gina de detalhes da conta (/accounts/:id)

**Data de Conclus√£o:** 2025-12-24  
**Sprint:** 1.9 - M√≥dulo de Contas - Frontend  
**Status:** ‚úÖ Conclu√≠do

---

## üìã Resumo

Implementa√ß√£o da p√°gina de detalhes da conta (`/accounts/:id`) com exibi√ß√£o completa de informa√ß√µes, estados de loading/error/not found, e navega√ß√£o para edi√ß√£o e lista de contas.

---

## üéØ Objetivo

Criar uma p√°gina detalhada para exibir todas as informa√ß√µes de uma conta espec√≠fica, permitindo ao usu√°rio visualizar dados completos e navegar para a√ß√µes relacionadas.

---

## ‚úÖ Implementa√ß√£o

### 1. **Estrutura da P√°gina**

**Componentes:**
- Header com bot√£o "Voltar"
- Card principal com informa√ß√µes da conta
- Se√ß√£o de saldo destacada
- Grid de informa√ß√µes detalhadas
- Bot√µes de a√ß√£o (Editar, Voltar)

**Layout:**
- Usa componente `Layout` (Header, Sidebar, Footer)
- Design responsivo com Tailwind CSS
- Grid adaptativo (1 coluna mobile, 2 desktop)

### 2. **Funcionalidades**

**Carregamento de Dados:**
- Obt√©m ID da conta da rota (`route.params.id`)
- Verifica se conta j√° est√° na lista do store
- Busca detalhes do servidor se necess√°rio
- Atualiza automaticamente ao mudar o ID na rota

**Exibi√ß√£o de Informa√ß√µes:**
- Nome da conta
- Tipo de conta (com label traduzido)
- Saldo atual (destacado em card separado)
- Contexto (Pessoal/Neg√≥cio)
- Moeda
- Status (Ativa/Inativa)
- Data de cria√ß√£o
- √öltima atualiza√ß√£o

**Estados:**
- **Loading:** Spinner com mensagem "Carregando detalhes da conta..."
- **Error:** Mensagem de erro com bot√µes "Tentar novamente" e "Voltar"
- **Not Found:** Mensagem amig√°vel com bot√£o para voltar
- **Success:** Exibi√ß√£o completa das informa√ß√µes

**Navega√ß√£o:**
- Bot√£o "Voltar" para lista de contas
- Bot√£o "Editar Conta" (preparado para futura implementa√ß√£o)
- Navega√ß√£o autom√°tica ao mudar ID na rota

### 3. **Integra√ß√£o com Store**

**Uso do `useAccountsStore`:**
- `accountsStore.currentAccount`: Conta atual
- `accountsStore.accounts`: Lista de contas (para cache)
- `accountsStore.isLoading`: Estado de carregamento
- `accountsStore.error`: Mensagem de erro
- `accountsStore.getAccount(id)`: Buscar detalhes
- `accountsStore.clearError()`: Limpar erro

**Otimiza√ß√£o:**
- Verifica se conta j√° est√° na lista antes de buscar
- Evita requisi√ß√µes desnecess√°rias ao servidor

### 4. **Fun√ß√µes Auxiliares**

**`getAccountTypeLabel(type)`:**
- Converte tipo de conta para label em portugu√™s
- BANK ‚Üí "Banco"
- WALLET ‚Üí "Carteira"
- INVESTMENT ‚Üí "Investimento"
- CREDIT_CARD ‚Üí "Cart√£o de Cr√©dito"

**`getContextLabel(context)`:**
- Converte contexto para label em portugu√™s
- PERSONAL ‚Üí "Pessoal"
- BUSINESS ‚Üí "Neg√≥cio"

**`formatCurrency(amount, currency)`:**
- Formata valor como moeda
- Usa `Intl.NumberFormat` com locale pt-BR
- Suporta BRL, USD, EUR

**`getBalanceColor(balance)`:**
- Retorna classe CSS baseada no saldo
- Positivo: `text-green-600`
- Negativo: `text-red-600`
- Zero: `text-gray-900`

**`formatDate(dateString)`:**
- Formata data para pt-BR
- Formato: DD/MM/YYYY HH:mm
- Usa `Intl.DateTimeFormat`

**`loadAccount()`:**
- Carrega detalhes da conta
- Verifica cache antes de buscar
- Trata erros

**`goBack()`:**
- Navega para lista de contas

**`handleRetry()`:**
- Limpa erro e tenta carregar novamente

---

## üé® Design e UX

### Layout da P√°gina
- **Header:** T√≠tulo e bot√£o voltar
- **Card Principal:** Informa√ß√µes principais em card branco
- **Saldo:** Destaque em card cinza com fonte grande
- **Grid de Informa√ß√µes:** 2 colunas em desktop, 1 em mobile
- **A√ß√µes:** Bot√µes no final da p√°gina

### Estados Visuais
- **Loading:** Spinner azul centralizado
- **Error:** Card vermelho com bot√µes de a√ß√£o
- **Not Found:** Card centralizado com mensagem amig√°vel
- **Success:** Informa√ß√µes organizadas em cards

### Cores e Tipografia
- **T√≠tulo:** text-4xl font-bold
- **Saldo:** text-4xl font-bold (cores condicionais)
- **Labels:** text-sm text-gray-600
- **Valores:** text-lg font-medium
- **Badges:** Cores suaves (verde para ativa)

---

## üìÅ Estrutura de Arquivos

```
frontend/src/
‚îî‚îÄ‚îÄ views/
    ‚îî‚îÄ‚îÄ AccountDetailsView.vue    ‚úÖ Atualizado (implementa√ß√£o completa)
```

---

## üîß Depend√™ncias

**Stores:**
- `useAccountsStore` (FE-ACC-001)

**Componentes:**
- `Layout` (FE-006)

**Router:**
- `/accounts/:id` - Detalhes da conta
- `/accounts` - Lista de contas (navega√ß√£o)

---

## ‚úÖ Testes

### Testes Manuais Realizados
- ‚úÖ P√°gina carrega corretamente com ID v√°lido
- ‚úÖ Conta √© buscada do servidor quando necess√°rio
- ‚úÖ Cache funciona (usa conta da lista se dispon√≠vel)
- ‚úÖ Loading state exibido durante carregamento
- ‚úÖ Error state exibido em caso de erro
- ‚úÖ Not found state exibido quando conta n√£o existe
- ‚úÖ Todas as informa√ß√µes s√£o exibidas corretamente
- ‚úÖ Formata√ß√£o de moeda funciona
- ‚úÖ Formata√ß√£o de data funciona
- ‚úÖ Labels traduzidos para portugu√™s
- ‚úÖ Navega√ß√£o funciona (voltar, editar)
- ‚úÖ Atualiza√ß√£o autom√°tica ao mudar ID na rota
- ‚úÖ Design responsivo funciona

---

## üöÄ Pr√≥ximos Passos

1. **FE-ACC-005:** Criar p√°gina de cria√ß√£o de conta
2. **FE-ACC-006:** Criar formul√°rio de conta
3. **FE-ACC-008:** Integrar com API de contas (criar)
4. **FE-ACC-009:** Integrar com API de contas (detalhes) - j√° implementado

---

## üìù Notas T√©cnicas

### Decis√µes de Design
1. **Cache inteligente:** Verifica lista antes de buscar
2. **Watch na rota:** Atualiza automaticamente ao mudar ID
3. **Estados completos:** Loading, error, not found, success
4. **Formata√ß√£o:** Usa Intl APIs para formata√ß√£o localizada
5. **Navega√ß√£o:** Bot√µes claros para a√ß√µes principais

### Melhorias Futuras
- Adicionar gr√°fico de hist√≥rico de saldo
- Adicionar lista de transa√ß√µes relacionadas
- Adicionar a√ß√µes r√°pidas (desativar, excluir)
- Adicionar edi√ß√£o inline de informa√ß√µes
- Adicionar exporta√ß√£o de dados

---

**Tarefa conclu√≠da com sucesso!** ‚úÖ

