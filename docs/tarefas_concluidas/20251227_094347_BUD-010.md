# BUD-009: Configurar rotas de budgets

**Data:** 2025-12-27 09:43:47  
**Sprint:** 3.1 - Budget Context - Backend  
**Status:** ✅ Completo

## Resumo

Configuração das rotas REST para o contexto de Budget, incluindo integração com o handler, middleware de autenticação e registro no servidor principal.

## Implementação

### Arquivos Criados

- `backend/internal/budget/presentation/routes/budget_routes.go`

### Arquivos Modificados

- `backend/cmd/api/main.go`

### Rotas Configuradas

Todas as rotas estão protegidas por autenticação JWT:

- `POST /api/v1/budgets` - Criar orçamento
- `GET /api/v1/budgets` - Listar orçamentos
- `GET /api/v1/budgets/:id` - Buscar orçamento
- `GET /api/v1/budgets/:id/progress` - Calcular progresso
- `PUT /api/v1/budgets/:id` - Atualizar orçamento
- `DELETE /api/v1/budgets/:id` - Deletar orçamento

### Integração no main.go

1. **Repositório**: `GormBudgetRepository` inicializado
2. **Use Cases**: Todos os use cases criados e injetados
3. **Handler**: `BudgetHandler` criado com todas as dependências
4. **Rotas**: `SetupBudgetRoutes` chamado no grupo `/api/v1`
5. **Event Bus**: Eventos de Budget subscritos para logging

### Middleware Aplicado

- **AuthMiddleware**: Todas as rotas requerem autenticação JWT
- **RequestIDMiddleware**: ID único para cada requisição
- **ErrorHandlerMiddleware**: Tratamento global de erros
- **LoggerMiddleware**: Logging de requisições

### Eventos de Domínio

Eventos subscritos no event bus:
- `BudgetCreated`
- `BudgetDeleted`

## Padrão Seguido

Seguido o mesmo padrão usado nas rotas de `Account`, `Transaction` e `Category`, garantindo consistência na arquitetura.

