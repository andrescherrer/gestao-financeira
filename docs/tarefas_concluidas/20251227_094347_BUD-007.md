# BUD-006: Implementar use cases de Budget (CRUD)

**Data:** 2025-12-27 09:43:47  
**Sprint:** 3.1 - Budget Context - Backend  
**Status:** ✅ Completo

## Resumo

Implementação dos use cases de CRUD para Budget, incluindo criação, leitura, atualização e exclusão de orçamentos. Cada use case encapsula uma operação de negócio específica.

## Implementação

### Arquivos Criados

- `backend/internal/budget/application/usecases/create_budget_usecase.go`
- `backend/internal/budget/application/usecases/get_budget_usecase.go`
- `backend/internal/budget/application/usecases/list_budgets_usecase.go`
- `backend/internal/budget/application/usecases/update_budget_usecase.go`
- `backend/internal/budget/application/usecases/delete_budget_usecase.go`
- `backend/internal/budget/application/usecases/create_budget_usecase_test.go`

### Use Cases Implementados

1. **CreateBudgetUseCase**
   - Cria novo orçamento
   - Valida entrada
   - Verifica duplicatas (mesma categoria e período)
   - Publica evento `BudgetCreated`

2. **GetBudgetUseCase**
   - Busca orçamento por ID
   - Verifica propriedade (userID)
   - Retorna erro se não encontrado ou não autorizado

3. **ListBudgetsUseCase**
   - Lista orçamentos do usuário
   - Suporta filtros: category_id, period_type, year, month, context, is_active
   - Retorna lista paginada

4. **UpdateBudgetUseCase**
   - Atualiza orçamento parcialmente
   - Valida propriedade
   - Atualiza apenas campos fornecidos
   - Publica evento `BudgetUpdated`

5. **DeleteBudgetUseCase**
   - Deleta orçamento
   - Valida propriedade
   - Publica evento `BudgetDeleted`

### DTOs Criados

- `CreateBudgetInput/Output`
- `GetBudgetInput/Output`
- `ListBudgetsInput/Output`
- `UpdateBudgetInput/Output`
- `DeleteBudgetInput`

### Validações

- UserID e CategoryID devem ser UUIDs válidos
- Amount deve ser maior que zero
- Currency deve ser válida (BRL, USD, EUR)
- PeriodType deve ser MONTHLY ou YEARLY
- Year deve estar entre 1900 e 3000
- Month deve estar entre 1 e 12 (para períodos mensais)
- Context deve ser PERSONAL ou BUSINESS

### Testes

Testes unitários para `CreateBudgetUseCase`:
- Criação bem-sucedida
- Prevenção de duplicatas
- Validações de entrada inválida

## Padrão Seguido

Seguido o mesmo padrão usado nos use cases de `Account`, `Transaction` e `Category`, garantindo consistência na arquitetura.

