# FE-007 - Configurar cliente API (Axios)

**Data:** 2025-12-23  
**Status:** ✅ Concluída

## Resumo da Implementação

**Tarefa:** FE-007 - Configurar cliente API (Axios)

### Arquivos Criados

1. **`lib/api/client.ts`**
   - Cliente Axios configurado
   - Base URL configurável via variável de ambiente
   - Timeout de 30 segundos
   - Interceptor de requisição para adicionar JWT token
   - Interceptor de resposta para tratar erros HTTP
   - Tratamento automático de 401 (redireciona para login)
   - Tratamento de outros erros HTTP (403, 404, 500+)

2. **`lib/api/types.ts`**
   - Tipos TypeScript para todas as entidades da API
   - Tipos para requisições e respostas
   - Tipos para autenticação (Login, Register)
   - Tipos para contas (Account, CreateAccountRequest, etc.)
   - Tipos para transações (Transaction, CreateTransactionRequest, etc.)
   - Interface ApiError para erros da API
   - Interface ApiResponse genérica

3. **`lib/api/auth.ts`**
   - Serviço de autenticação
   - Métodos: login, register
   - Métodos de gerenciamento de token: saveToken, removeToken, getToken
   - Método isAuthenticated para verificar autenticação

4. **`lib/api/accounts.ts`**
   - Serviço de contas
   - Métodos: list, getById, create
   - Tipado com TypeScript

5. **`lib/api/transactions.ts`**
   - Serviço de transações
   - Métodos: list, getById, create, update, delete
   - Suporte a filtro por account_id na listagem
   - Tipado com TypeScript

6. **`lib/api/index.ts`**
   - Arquivo de exportação centralizada
   - Exporta cliente, tipos e serviços

### Configurações

#### Base URL
- Configurável via `NEXT_PUBLIC_API_URL`
- Padrão: `http://localhost:8080/api/v1`
- Será configurado em `.env.local` (FE-008)

#### Interceptors

**Request Interceptor:**
- Adiciona token JWT automaticamente em todas as requisições
- Busca token do `localStorage`
- Adiciona header `Authorization: Bearer <token>`

**Response Interceptor:**
- Trata erros HTTP automaticamente
- 401: Remove token e redireciona para login
- 403: Log de erro de permissão
- 404: Log de recurso não encontrado
- 500+: Log de erro no servidor
- Erros de conexão: Log de erro de conexão

### Funcionalidades

#### Autenticação
- ✅ Login com email e senha
- ✅ Registro de novo usuário
- ✅ Gerenciamento de token JWT
- ✅ Verificação de autenticação
- ✅ Remoção automática de token em 401

#### Contas
- ✅ Listar todas as contas
- ✅ Obter conta por ID
- ✅ Criar nova conta

#### Transações
- ✅ Listar transações (com filtro opcional por conta)
- ✅ Obter transação por ID
- ✅ Criar nova transação
- ✅ Atualizar transação
- ✅ Deletar transação

### Tipos TypeScript

Todos os serviços são totalmente tipados:
- Requisições tipadas
- Respostas tipadas
- Erros tipados
- Autocomplete no IDE
- Type safety em tempo de compilação

### Próximos Passos

Esta configuração será usada em:
- **FE-008**: Configurar variáveis de ambiente
- **FE-AUTH-003**: Criar hook useAuth (usará authService)
- **FE-ACC-001**: Criar hook useAccounts (usará accountsService)
- **FE-TX-001**: Criar hook useTransactions (usará transactionsService)
- **FE-AUTH-005/006**: Formulários de login/registro (usarão authService)

### Testes Realizados

- ✅ Cliente Axios configurado
- ✅ Interceptors funcionando
- ✅ Tipos TypeScript definidos
- ✅ Serviços criados e exportados
- ✅ `npm run build` - Build do projeto passou
- ✅ TypeScript sem erros

### Melhorias Futuras

- Adicionar retry automático para requisições falhadas
- Adicionar cache de requisições
- Adicionar cancelamento de requisições
- Adicionar loading states
- Adicionar rate limiting
- Adicionar refresh token automático

### Próxima Tarefa

FE-008 - Configurar variáveis de ambiente (.env.local)

### Commits Realizados

- `feat: FE-007 - configurar cliente API (Axios)`

