# FE-ACC-005: Criar p√°gina de cria√ß√£o de conta (/accounts/new)

**Data de Conclus√£o:** 2025-12-24  
**Sprint:** 1.9 - M√≥dulo de Contas - Frontend  
**Status:** ‚úÖ Conclu√≠do

---

## üìã Resumo

Implementa√ß√£o da p√°gina de cria√ß√£o de conta (`/accounts/new`) com formul√°rio completo, valida√ß√£o usando vee-validate e Zod, integra√ß√£o com o store, e navega√ß√£o para detalhes ap√≥s cria√ß√£o bem-sucedida.

---

## üéØ Objetivo

Criar uma p√°gina funcional e intuitiva para criar novas contas financeiras, com valida√ß√£o robusta e feedback visual adequado.

---

## ‚úÖ Implementa√ß√£o

### 1. **Schema de Valida√ß√£o** (`src/validations/account.ts`)

**Valida√ß√µes:**
- **Nome:** obrigat√≥rio, m√≠nimo 2 caracteres, m√°ximo 100 caracteres
- **Tipo:** obrigat√≥rio, enum (BANK, WALLET, INVESTMENT, CREDIT_CARD)
- **Contexto:** obrigat√≥rio, enum (PERSONAL, BUSINESS)
- **Moeda:** opcional, enum (BRL, USD, EUR), padr√£o BRL
- **Saldo Inicial:** opcional, deve ser n√∫mero v√°lido se preenchido

**Caracter√≠sticas:**
- Usa Zod para valida√ß√£o
- Mensagens de erro em portugu√™s
- Type-safe com TypeScript

### 2. **P√°gina de Cria√ß√£o** (`src/views/NewAccountView.vue`)

**Estrutura:**
- Header com bot√£o "Voltar"
- Formul√°rio em card branco
- Campos com valida√ß√£o
- Estados de loading e error
- Bot√µes de a√ß√£o (Criar, Cancelar)

**Campos do Formul√°rio:**
1. **Nome da Conta** (text, obrigat√≥rio)
2. **Tipo de Conta** (select, obrigat√≥rio)
   - Banco
   - Carteira
   - Investimento
   - Cart√£o de Cr√©dito
3. **Contexto** (select, obrigat√≥rio)
   - Pessoal
   - Neg√≥cio
4. **Moeda** (select, opcional, padr√£o BRL)
   - BRL - Real Brasileiro
   - USD - D√≥lar Americano
   - EUR - Euro
5. **Saldo Inicial** (number, opcional)
   - Permite valores decimais
   - Dica: "Deixe em branco para come√ßar com saldo zero"

**Funcionalidades:**
- Valida√ß√£o em tempo real (vee-validate)
- Feedback visual de erros (bordas vermelhas)
- Mensagens de erro espec√≠ficas por campo
- Loading state durante cria√ß√£o
- Tratamento de erros da API
- Navega√ß√£o autom√°tica ap√≥s sucesso

### 3. **Integra√ß√£o com Store**

**Uso do `useAccountsStore`:**
- `accountsStore.createAccount(data)`: Criar conta
- `accountsStore.isLoading`: Estado de carregamento
- `accountsStore.error`: Mensagem de erro (n√£o usado, erro local)

**Fluxo:**
1. Usu√°rio preenche formul√°rio
2. Valida√ß√£o client-side (vee-validate + Zod)
3. Se v√°lido, chama `createAccount` do store
4. Store faz requisi√ß√£o para API
5. Se sucesso, redireciona para detalhes da conta criada
6. Se erro, exibe mensagem de erro

### 4. **Valida√ß√£o e UX**

**Valida√ß√£o:**
- Campos obrigat√≥rios marcados com asterisco vermelho
- Valida√ß√£o em tempo real ao perder foco
- Mensagens de erro espec√≠ficas
- Feedback visual (bordas vermelhas em campos inv√°lidos)

**UX:**
- Placeholders informativos
- Dicas de preenchimento
- Bot√£o desabilitado durante cria√ß√£o
- √çcone de spinner durante loading
- Bot√£o "Cancelar" para voltar sem criar

---

## üé® Design e UX

### Layout
- **Header:** T√≠tulo e bot√£o voltar
- **Card do Formul√°rio:** Fundo branco com borda
- **Campos:** Espa√ßamento adequado (space-y-6)
- **A√ß√µes:** Bot√µes alinhados no final

### Estados Visuais
- **Campos v√°lidos:** Borda cinza
- **Campos inv√°lidos:** Borda vermelha
- **Loading:** Bot√£o desabilitado com spinner
- **Error:** Card vermelho acima do formul√°rio

### Cores e Tipografia
- **Labels:** text-sm font-medium text-gray-700
- **Campos:** border-gray-300 (normal), border-red-300 (erro)
- **Bot√£o prim√°rio:** bg-blue-600 hover:bg-blue-700
- **Bot√£o secund√°rio:** border-gray-300

---

## üìÅ Estrutura de Arquivos

```
frontend/src/
‚îú‚îÄ‚îÄ validations/
‚îÇ   ‚îî‚îÄ‚îÄ account.ts          ‚úÖ Novo (schema Zod)
‚îî‚îÄ‚îÄ views/
    ‚îî‚îÄ‚îÄ NewAccountView.vue  ‚úÖ Atualizado (implementa√ß√£o completa)
```

---

## üîß Depend√™ncias

**Valida√ß√£o:**
- `vee-validate` (FE-004)
- `@vee-validate/zod` (FE-004)
- `zod` (FE-004)

**Stores:**
- `useAccountsStore` (FE-ACC-001)

**Componentes:**
- `Layout` (FE-006)

**Router:**
- `/accounts/new` - Criar conta
- `/accounts/:id` - Detalhes da conta (navega√ß√£o ap√≥s cria√ß√£o)
- `/accounts` - Lista de contas (navega√ß√£o cancelar/voltar)

---

## ‚úÖ Testes

### Testes Manuais Realizados
- ‚úÖ P√°gina carrega corretamente
- ‚úÖ Formul√°rio renderiza todos os campos
- ‚úÖ Valida√ß√£o funciona (campos obrigat√≥rios)
- ‚úÖ Valida√ß√£o de nome (m√≠nimo 2 caracteres)
- ‚úÖ Valida√ß√£o de tipo (obrigat√≥rio)
- ‚úÖ Valida√ß√£o de contexto (obrigat√≥rio)
- ‚úÖ Valida√ß√£o de saldo inicial (n√∫mero v√°lido)
- ‚úÖ Mensagens de erro exibidas corretamente
- ‚úÖ Feedback visual de erros funciona
- ‚úÖ Loading state durante cria√ß√£o
- ‚úÖ Cria√ß√£o de conta funciona
- ‚úÖ Navega√ß√£o ap√≥s cria√ß√£o bem-sucedida
- ‚úÖ Bot√£o cancelar funciona
- ‚úÖ Bot√£o voltar funciona
- ‚úÖ Tratamento de erros da API

---

## üöÄ Pr√≥ximos Passos

1. **FE-ACC-006:** Criar formul√°rio de conta (refatorar para componente reutiliz√°vel)
2. **FE-ACC-008:** Integrar com API de contas (criar) - j√° implementado
3. **FE-ACC-010:** Implementar loading e error states - j√° implementado

---

## üìù Notas T√©cnicas

### Decis√µes de Design
1. **Valida√ß√£o client-side:** Usa vee-validate + Zod para valida√ß√£o antes do submit
2. **Navega√ß√£o autom√°tica:** Redireciona para detalhes ap√≥s cria√ß√£o bem-sucedida
3. **Saldo inicial opcional:** Permite criar conta sem saldo inicial
4. **Moeda padr√£o:** BRL como padr√£o (mais comum no Brasil)
5. **Tratamento de erros:** Mensagens amig√°veis em portugu√™s

### Melhorias Futuras
- Adicionar preview da conta antes de criar
- Adicionar valida√ß√£o de nome duplicado
- Adicionar sugest√µes de nomes baseadas no tipo
- Adicionar hist√≥rico de contas criadas recentemente
- Adicionar templates de contas pr√©-configuradas

---

**Tarefa conclu√≠da com sucesso!** ‚úÖ

